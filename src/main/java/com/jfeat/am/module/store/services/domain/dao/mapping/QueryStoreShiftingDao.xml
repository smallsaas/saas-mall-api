<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jfeat.am.module.store.services.domain.dao.QueryStoreShiftingDao">
    <sql id="Base_Column_List">
        t_store_shifting.*
    </sql>
    <select id="findStoreShiftingPage" resultType="StoreShiftingRecord" parameterType="StoreShiftingRecord">
        SELECT t_store_shifting.*
        FROM t_store_shifting
        LEFT JOIN t_store_assistant now on
        <if test="isMyApply != null and isMyApply>0">
            <choose>
                <when test="isMyApply==1">
                    t_store_shifting.assistant_id = now.id
                </when>
                <otherwise>
                    t_store_shifting.next_assistant_id = now.id
                </otherwise>
            </choose>

        </if>

        WHERE 1=1
        AND now.user_id=#{userId}


        <if test="record.status != null and record.status!= ''">
            AND t_store_shifting.status = #{record.status}

        </if>

        <if test="record.id != null and record.id>0 ">
            AND t_store_shifting.id LIKE CONCAT('%',#{record.id},'%')
        </if>
        <if test="record.storeId != null and record.storeId>0 ">
            AND t_store_shifting.store_id LIKE CONCAT('%',#{record.storeId},'%')
        </if>
        <if test="record.cashierClientId != null and record.cashierClientId>0 ">
            AND t_store_shifting.cashier_client_id LIKE CONCAT('%',#{record.cashierClientId},'%')
        </if>
        <if test="record.assistantId != null and record.assistantId>0 ">
            AND t_store_shifting.assistant_id LIKE CONCAT('%',#{record.assistantId},'%')
        </if>
        <if test="record.cashier != null and record.cashier!= ''">
            AND t_store_shifting.cashier LIKE CONCAT('%',#{record.cashier},'%')
        </if>
        <if test="record.nextAssistantId != null and record.nextAssistantId>0 ">
            AND t_store_shifting.next_assistant_id LIKE CONCAT('%',#{record.nextAssistantId},'%')
        </if>
        <if test="record.nextCashier != null and record.nextCashier!= ''">
            AND t_store_shifting.next_cashier LIKE CONCAT('%',#{record.nextCashier},'%')
        </if>

        <if test="record.onDutyTime != null and record.onDutyTime>0 ">
            AND t_store_shifting.on_duty_time LIKE CONCAT('%',#{record.onDutyTime},'%')
        </if>
        <if test="record.logTime != null and record.logTime>0 ">
            AND t_store_shifting.log_time LIKE CONCAT('%',#{record.logTime},'%')
        </if>
        <if test="record.onDutyAmount != null and record.onDutyAmount>0 ">
            AND t_store_shifting.on_duty_amount LIKE CONCAT('%',#{record.onDutyAmount},'%')
        </if>
        <if test="record.logAmount != null and record.logAmount>0 ">
            AND t_store_shifting.log_amount LIKE CONCAT('%',#{record.logAmount},'%')
        </if>
    </select>
</mapper>